<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="./index.css">
    <script src="./index.js"></script>
    <title>Document</title>
</head>

<body>
    <script>
        function loadDoc(callback) {
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function () {
                if (this.status === 200) {
                    const responseData = JSON.parse(this.responseText);
                    callback(null, responseData);
                } else {
                    const error = new Error(`Error loading data. Status: ${this.status}`);
                    callback(error, null);
                }
            };
            xhttp.open("GET", "json.json", true);
            xhttp.send();
        }
        loadDoc(function (error, responseData) {
            if (!error) {
                let x = 0;
                var id, dpn, type_0, type_1, type_2, type_3, type_4, type_5, type_6, type_7, type_8, type_9, type_10, lastRealDPN;
                lastRealDPN = '';
                while (x < responseData.length / 2) {
                    id = responseData[x].id;
                    responseData[x].dpn == null ? lastRealDPN = lastRealDPN : lastRealDPN = responseData[x].dpn;
                    responseData[x].dpn != null ? dpn = responseData[x].dpn : dpn = lastRealDPN;
                    type_0 = responseData[x].type_0 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_1 = responseData[x].type_1 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_2 = responseData[x].type_2 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_3 = responseData[x].type_3 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_4 = responseData[x].type_4 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_5 = responseData[x].type_5 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_6 = responseData[x].type_6 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_7 = responseData[x].type_7 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_8 = responseData[x].type_8 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_9 = responseData[x].type_9 == 1 ? `<img src="./Img/done.svg">` : "";
                    type_10 = responseData[x].type_10 == 1 ? `<img src="./Img/done.svg">` : "";
                    avoidRepetation(id, dpn, type_0, type_1, type_2, type_3, type_4, type_5, type_6, type_7, type_8, type_9, type_10)
                    x++;
                }
            }
        });
        function filterResult() {
            document.getElementById("dataContainer").innerHTML = "";
            var DPN = document.getElementById("searchBox").value;
            loadDoc(function (error, responseData) {
                if (!error) {
                    let x = 0;
                    var id, dpn, type_0, type_1, type_2, type_3, type_4, type_5, type_6, type_7, type_8, type_9, type_10, lastRealDPN;
                    lastRealDPN = '';
                    var count = 0;
                    while (x < responseData.length / 2) {
                        if (DPN == responseData[x].dpn) {
                            count++;
                            id = responseData[x].id;
                            responseData[x].dpn == null ? lastRealDPN = lastRealDPN : lastRealDPN = responseData[x].dpn;
                            responseData[x].dpn != null ? dpn = responseData[x].dpn : dpn = lastRealDPN;
                            type_0 = responseData[x].type_0 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_1 = responseData[x].type_1 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_2 = responseData[x].type_2 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_3 = responseData[x].type_3 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_4 = responseData[x].type_4 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_5 = responseData[x].type_5 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_6 = responseData[x].type_6 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_7 = responseData[x].type_7 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_8 = responseData[x].type_8 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_9 = responseData[x].type_9 == 1 ? `<img src="./Img/done.svg">` : "";
                            type_10 = responseData[x].type_10 == 1 ? `<img src="./Img/done.svg">` : "";
                            avoidRepetation(id, dpn, type_0, type_1, type_2, type_3, type_4, type_5, type_6, type_7, type_8, type_9, type_10)
                        }
                        x++;
                    }
                    if (count === 0) {
                        document.getElementById("dataContainer").innerHTML = `
            <div class="emptyTable">
            <img src="./Img/folder_off.svg" alt="folder of">
            <p>
                 0 item ?
            </p>
          </div>
            `;
                    }
                }
            });
        }
        function allResult() {
            document.getElementById("dataContainer").innerHTML = "";
            loadDoc(function (error, responseData) {
                if (!error) {
                    let x = 0;
                    var id, dpn, type_0, type_1, type_2, type_3, type_4, type_5, type_6, type_7, type_8, type_9, type_10, lastRealDPN;
                    lastRealDPN = '';
                    while (x < responseData.length / 2) {
                        id = responseData[x].id;
                        responseData[x].dpn == null ? lastRealDPN = lastRealDPN : lastRealDPN = responseData[x].dpn;
                        responseData[x].dpn != null ? dpn = responseData[x].dpn : dpn = lastRealDPN;
                        type_0 = responseData[x].type_0 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_1 = responseData[x].type_1 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_2 = responseData[x].type_2 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_3 = responseData[x].type_3 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_4 = responseData[x].type_4 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_5 = responseData[x].type_5 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_6 = responseData[x].type_6 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_7 = responseData[x].type_7 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_8 = responseData[x].type_8 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_9 = responseData[x].type_9 == 1 ? `<img src="./Img/done.svg">` : "";
                        type_10 = responseData[x].type_10 == 1 ? `<img src="./Img/done.svg">` : "";
                        avoidRepetation(id, dpn, type_0, type_1, type_2, type_3, type_4, type_5, type_6, type_7, type_8, type_9, type_10)
                        x++;
                    }
                }
            });
        }

    </script>
    <img src="./Img/aptivLogo.jfif" class="aptivLogo">
    <p class="title" id="clientsTableTitle">
        Terminals List of Rechecked Monitoring Parameters
    </p>
    <div class="searchBox">
        <input type="text" placeholder="search by DPN" id="searchBox">
        <button class="searchButton" onclick="filterResult()">search</button>
    </div>
    <div class="tableContainer" id="clientsTable">
        <div class="tableHead">
            <div class="cell_1">item</div>
            <div class="cell_2">DPN</div>
            <div class="cell_3">
                OES
                <div class="itemType">
                    <div>
                        CPM 4000
                    </div>
                    <div>
                        CPM 4100
                    </div>
                    <div>
                        CPM 5XXX
                    </div>
                </div>
            </div>
            <div class="cell_4">
                CFA CFA+
                <div class="itemType">
                    <div>
                        721
                    </div>
                    <div>
                        721/1 C3170
                    </div>
                    <div>
                        721/1 C3170
                    </div>
                </div>
            </div>
            <div class="cell_5">
                DOUBLE x
                <div class="itemType">
                    <div>
                        721
                    </div>
                    <div>
                        721/1 C3170
                    </div>
                </div>
            </div>
            <div class="cell_6">
                SLE
                <div class="itemType">
                    <div>
                        SLE
                    </div>
                </div>
            </div>
            <div class="cell_7">
                KISTLER
                <div class="itemType">
                    <div>
                        CC2
                    </div>
                    <div>
                        CC3
                    </div>
                </div>
            </div>
        </div>
        <div id="dataContainer">
        </div>
        <div class="allResult" onclick="allResult()" style="width: 20%; margin-top: 50px ; margin-right: 80;">
            see all
        </div>
    </div>
</body>

</html>